<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>BazaarJo - تصفح العقارات</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }
    header {
      background: linear-gradient(90deg, #d81b60, #8e24aa);
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 30px;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      user-select: none;
    }
    .filters {
      display: none;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
      background: #fff;
      border-bottom: 1px solid #ddd;
    }
    .filters.active {
      display: flex;
    }
    select {
      padding: 10px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 5px;
      width: 200px;
    }
    #map {
      height: 500px;
      margin: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .property-list {
      display: none;
      background: #fff;
      padding: 20px;
      margin: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      max-height: 400px;
      overflow-y: auto;
    }
    .property-item {
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
      cursor: pointer;
    }
    .property-item:last-child {
      border-bottom: none;
    }
    .property-item:hover {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>
  <header onclick="toggleView()">BazaarJo - تصفح العقارات</header>

  <div class="filters" id="filters">
    <select id="region">
      <option value="">اختر المنطقة</option>
      <option value="عمان">عمان</option>
      <option value="إربد">إربد</option>
      <option value="الزرقاء">الزرقاء</option>
    </select>

    <select id="type">
      <option value="">نوع العقار</option>
      <option value="أراضي سكنية">أراضي سكنية</option>
      <option value="أراضي تجارية">أراضي تجارية</option>
      <option value="أراضي زراعية">أراضي زراعية</option>
      <option value="شقق">شقق</option>
      <option value="فلل">فلل</option>
      <option value="مزارع">مزارع</option>
    </select>

    <select id="price">
      <option value="">السعر</option>
      <option value="lt50">أقل من 50 ألف</option>
      <option value="50-100">من 50 إلى 100 ألف</option>
      <option value="gt100">أكثر من 100 ألف</option>
    </select>

    <select id="area">
      <option value="">المساحة</option>
      <option value="lt100">أقل من 100م²</option>
      <option value="100-200">من 100 إلى 200م²</option>
      <option value="gt200">أكثر من 200م²</option>
    </select>

    <select id="rooms">
      <option value="">عدد الغرف</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4+</option>
    </select>
  </div>

  <div id="map"></div>

  <div class="property-list" id="propertyList"></div>

  <script>
    const listings = [
      {
        position: { lat: 31.95, lng: 35.91 },
        title: "شقة في عمان - 100م²",
        region: "عمان",
        type: "شقق",
        price: 90000,
        area: 100,
        rooms: 3,
      },
      {
        position: { lat: 32.0, lng: 36.0 },
        title: "أرض زراعية في الزرقاء",
        region: "الزرقاء",
        type: "أراضي زراعية",
        price: 45000,
        area: 300,
        rooms: 0,
      },
      {
        position: { lat: 32.55, lng: 35.85 },
        title: "فيلا فاخرة في إربد - 250م²",
        region: "إربد",
        type: "فلل",
        price: 150000,
        area: 250,
        rooms: 5,
      },
    ];

    let map;
    let markers = [];

    function initMap() {
      const center = { lat: 31.963158, lng: 35.930359 };
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 8,
        center: center,
      });
      renderMarkers(listings);
    }

    function clearMarkers() {
      markers.forEach(marker => marker.setMap(null));
      markers = [];
    }

    function renderMarkers(data) {
      clearMarkers();
      data.forEach(listing => {
        const marker = new google.maps.Marker({
          position: listing.position,
          map: map,
          title: listing.title
        });
        markers.push(marker);
      });
    }

    function toggleView() {
      const filters = document.getElementById('filters');
      const propertyList = document.getElementById('propertyList');

      // Toggle filters visibility
      filters.classList.toggle('active');

      // Toggle property list visibility
      if (propertyList.style.display === "none" || propertyList.style.display === "") {
        propertyList.style.display = "block";
        renderPropertyList(listings);
      } else {
        propertyList.style.display = "none";
      }
    }

    function renderPropertyList(data) {
      const propertyList = document.getElementById('propertyList');
      propertyList.innerHTML = '';

      if(data.length === 0){
        propertyList.innerHTML = '<p>لا توجد عقارات مطابقة</p>';
        return;
      }

      data.forEach(item => {
        const div = document.createElement('div');
        div.className = 'property-item';
        div.textContent = item.title;
        div.onclick = () => {
          // عند النقر على العقار، نحرك الخريطة ونفتح الماركر
          map.setCenter(item.position);
          map.setZoom(14);
          // يمكن إضافة فتح info window لو تحب
        };
        propertyList.appendChild(div);
      });
    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
  </script>
</body>
</html>
